(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"0tVm":function(t,e,n){},KQTq:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return Y})),n.d(e,"NODE_TYPE_MAP",(function(){return H}));var i=n("qLMh"),a=n("9og8"),o=n("tJVT"),r=n("q1tI"),s=n.n(r),h=n("LvDl"),c=n("i8i4"),l=n.n(c),d=n("a8tM"),E=n("k1fw"),m=n("KAy6"),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal 12px Segoe UI",n=document.createElement("canvas"),i=n.getContext("2d");i.font=e;var a=i.measureText(t);return a.width},O=t=>(t.children&&(t._children=t.children,t._children.forEach(O),t.children=null),t),T=t=>(t._children&&(t.children=t._children,t.children.forEach(T),t._children=null),t),N=(t,e)=>{var n=Object(m["renderToString"])(s.a.createElement("svg",{width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("circle",{id:"shape",fill:e,cx:"11",cy:"11",r:"11"}),s.a.createElement("text",{fontFamily:"PingFangSC-Regular, PingFang SC",fontSize:"12",fontWeight:"normal",fill:"#FFFFFF"},s.a.createElement("tspan",{x:"5",y:"15"},t)))),i=encodeURIComponent(n),a=btoa(i),o="data:image/svg+xml;base64,".concat(a);return o},D=120,g=40,C=120,A=20,_=38,p=5,I=130,B=60,v=60,f=100,y=20,R=16,P={RELATION_WIDTH:D,COMPONENT_HEIGHT:g,COMPONENT_WIDTH:C,COMPONENT_SPACE_VERTICAL:A,COMPONENT_SPACE_HORIZONTAL:_,COMPONENT_MARGIN:p,ROOT_HEIGHT:B,MARGIN_LEFT:v,CONTENT_WIDTH:f,DOT_WIDTH:y,EXPAND_WIDTH:R},x={POLICY:{en:"P",cn:"\u7b56",color:"#D97B4E",img:N("\u7b56","#D97B4E")},POLICY_VERSION:{en:"P",cn:"\u7b56",color:"#D97B4E",img:N("\u7b56","#D97B4E")},POLICY_PIBLISH_HIS:{en:"P",cn:"\u7b56",color:"#C78F58",img:N("\u7b56","#D97B4E")},DECISION_TOOL:{en:"D",cn:"\u51b3",color:"#357BEB",img:N("\u51b3","#357BEB")},DECISION_TOOL_VERSION:{en:"D",cn:"\u51b3",color:"#357BEB",img:N("\u51b3","#357BEB")},THIRD_SERVICE:{en:"T",cn:"\u4e09",color:"#3BA99E",img:N("\u4e09","#3BA99E")},THIRD_SERVICE_VERSION:{en:"T",cn:"\u4e09",color:"#3BA99E",img:N("\u4e09","#3BA99E")},DATASOURCE_SERVICE:{en:"T",cn:"\u4e09",color:"#3BA99E",img:N("\u4e09","#3BA99E")},MODEL:{en:"M",cn:"\u6a21",color:"#91B53B",img:N("\u6a21","#91B53B")},MODEL_VERSION:{en:"M",cn:"\u6a21",color:"#91B53B",img:N("\u6a21","#91B53B")},RULE:{en:"R",cn:"\u89c4",color:"#126BFB",img:N("\u89c4","#126BFB")},RULE_SET:{en:"R",cn:"\u89c4",color:"#1DA3DA",img:N("\u89c4","#1DA3DA")},RULE_SET_VERSION:{en:"R",cn:"\u89c4",color:"#1DA3DA",img:N("\u89c4","#1DA3DA")},INDEX_OFFLINE:{en:"O",cn:"\u79bb",color:"#BC6BC6",img:N("\u79bb","#BC6BC6")},INDEX_OFFLINE_VERSION:{en:"O",cn:"\u79bb",color:"#BC6BC6",img:N("\u79bb","#BC6BC6")},INDEX_REALTIME:{en:"R",cn:"\u5b9e",color:"#0BBBD1",img:N("\u5b9e","#0BBBD1")},INDEX_REALTIME_VERSION:{en:"R",cn:"\u5b9e",color:"#0BBBD1",img:N("\u5b9e","#0BBBD1")},FIELD_SYSTEM:{en:"S",cn:"\u7cfb",color:"#6776CF",img:N("\u7cfb","#6776CF")},FIELD_SCRIPT:{en:"D",cn:"\u52a8",color:"#5B8FF9 ",img:N("\u52a8","#5B8FF9")},DEAL_TYPE:{en:"R",cn:"\u98ce",color:"#CF6867",img:N("\u98ce","#CF6867")},EVENT_TYPE:{en:"E",cn:"\u4e8b",color:"#D5A142",img:N("\u7cfb","#D5A142")},FUNCTION:{en:"F",cn:"\u51fd",color:"#DB6595",img:N("\u51fd","#DB6595")},FUNCTION_VERSION:{en:"F",cn:"\u51fd",color:"#DB6595",img:N("\u51fd","#DB6595")},NAME_LIST:{en:"L",cn:"\u540d",color:"#E6A133",img:N("\u540d","#E6A133")},FLOW_TEMPLATE:{en:"P",cn:"\u6d41",color:"#72A768",img:N("\u6d41","#72A768")},RULE_IMMUNE:{en:"R",cn:"\u89c4",color:"#565ED5",img:N("\u89c4","#565ED5")},NO_DISTURB:{en:"D",cn:"\u514d",color:"#7ABD87",img:N("\u514d","#7ABD87")},API_SERVICE:{en:"D",cn:"\u5bf9",color:"#945FB9",img:N("\u5bf9","#945FB9")},ETL_HANDLER:{en:"E",cn:"E",color:"#5681B0",img:N("E","#5681B0")},DATASOURCE_ETL_HANDLER:{en:"E",cn:"E",color:"#5681B0",img:N("E","#5681B0")},INDEX_DATASOURCE:{en:"E",cn:"\u5916",color:"#BC6BC6",img:N("\u5916","#BC6BC6")},INDEX_YUNTU:{en:"G",cn:"\u56fe",color:"#BC6BC6",img:N("\u56fe","#BC6BC6")},INDEX_YUNTU_VERSION:{en:"G",cn:"\u56fe",color:"#BC6BC6",img:N("\u56fe","#BC6BC6")},SCORE_CARD:{en:"S",cn:"\u8bc4",color:"#DB6595",img:N("\u8bc4","#DB6595")}},S={DATASOURCE_PARTNER:{en:"P",name:"\u5408",color:"#357BEB"},DATASOURCE_CONTRACT:{en:"C",name:"\u5408",color:"#1068f5"},DATASOURCE_ETL_HANDLER:{en:"E",cn:"E",color:"#D5A142",img:N("E","#D5A142")},DATASOURCE_ETL_HANDLER_POST:{en:"P",name:"\u540e",color:"#3BA99E",img:N("\u540e","#3BA99E")},DATASOURCE_ETL_HANDLER_PRE:{en:"P",name:"\u524d",color:"#1DA3DA",img:N("\u524d","#1DA3DA")},DATASOURCE_CHANNEL_SERVICE:{en:"C",name:"\u8c03",color:"#945FB9",img:N("\u8c03","#945FB9")},DATASOURCE_SERVICE_SHUNT:{en:"S",name:"\u5206",color:"#6776CF",img:N("\u5206","#6776CF")},DATASOURCE_SERVICE_EXCEPTION:{en:"A",name:"\u5f02",color:"#D97B4E",img:N("\u5f02","#D97B4E")},DATASOURCE_CHANNEL_SERVICE_GROUP:{en:"C",name:"\u8c03",color:"#DB6595",img:N("\u8c03","#DB6595")},EXECUTE_MODE_PARALLEL:{en:"P",name:"\u5e76",color:"#91B53B",img:N("\u5e76","#91B53B")},EXECUTE_MODE_SERIAL:{en:"S",name:"\u4e32",color:"#72A768",img:N("\u5e76","#91B53B")}},H=Object(E["a"])(Object(E["a"])(Object(E["a"])({},x),S),{},{tiance:Object(E["a"])({},x),tianzuo:Object(E["a"])({},S)}),L=P;class M{constructor(){this.data=null,this.flattenNodes=[],this.flattenLinks=[],this.hierarchyData=null,this.finalValue=null,this.keyDefault=0}initData(){if(this.data){var t=Object(h["cloneDeep"])(this.data);this.setKey(t,{}),this.finalValue=Object.assign({type:"relation",path:["relation"]},t),this.finalValue.children=this.addDropAreaAndOperation(t.children,["children"]),this.hierarchyData=Object(d["a"])(this.finalValue)}}setKey(t,e){var n=t=>{t&&t.key||(t.key=this.getUniqKey(this.keyDefault,e)),e[t.key]=1,t&&t.children&&t.children.length&&this.setKey(t.children,e)};Array.isArray(t)?t.forEach(((t,e)=>{t.index=e,n(t)})):t&&(t.index=0,n(t))}getUniqKey(t,e){if(t in e){var n=t+1;return this.getUniqKey(n,e)}return t}addDropAreaAndOperation(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t||(t=[]);var a=[];return t.length&&t.forEach(((t,o)=>{var r,s=[].concat(e,[o]),h=t||{},c=h.key,l="";l=H&&(null===(r=H[t.nodeType])||void 0===r?void 0:r.color)||i;var d=Object.assign({},t,{type:"leaf",key:c,index:o,parentPath:e,path:s,color:l});t.children&&t.children.length&&(d.type="relation",d.children=this.addDropAreaAndOperation(t.children,s.concat(["children"]),n+1,l),s.push("relation")),a.push(d)})),a}}var F=M,w=(n("Vu+n"),t=>{var e=t.node,n=void 0===e?{}:e,i=n.data;return s.a.createElement("div",{className:"common"},(null===i||void 0===i?void 0:i.nodeName)||"\u9ed8\u8ba4\u8282\u70b9")}),k=t=>{var e=t.source,n=t.target,i=t.root,a=t.color,o=t.type,r=t.linkType,h=(e,n,i,o)=>{var h=c(e,i),d=h?i-e:Math.abs(n-o),E=t.highlight,m={position:"absolute",height:h?0:d,width:h?d:0,left:e,top:(h?n:Math.min(n,o))+g/2,zIndex:E?1:0,borderBottom:"1px ".concat(r||"solid"," ").concat(a||"#c7d0d9"),borderLeft:"1px ".concat(r||"solid"," ").concat(a||"#c7d0d9")},u="link "+(E?["link-highlight"]:"");return s.a.createElement("div",{className:u,style:m,"data-key":l([e,n,i,o]),key:l([e,n,i,o])})},c=(t,e)=>t!==e,l=t=>{void 0===t&&(t=[]);var e=t,n=e[0],i=e[1],a=e[2],o=e[3];return","+n+","+i+"-"+a+","+o},d=e.x,E=e.y,m=n.x,u=n.y,O=[];if(d===m||E===u)O=[h(d,E,m,u)];else{var T=(d+m)/2,N=E,D=T,C=u;1===o?(O.push(h(d,E,T,N)),O.push(h(T,N,D,C)),O.push(h(D,C,m,u))):2===o&&(i?(O.push(h(d,E,T,N)),O.push(h(T,N,D,C)),O.push(h(D,C,m,u))):(O.push(h(d,E,m,E)),O.push(h(m,E,m,u))))}return s.a.createElement(s.a.Fragment,null,O)};n("0tVm");function U(t){return e=>{var n=e.x,i=e.y,a=e.width,o=e.fixed,r=e.minWidth,h=e.minHeight,c={};c=o?{width:r}:{width:a};var l=Object(E["a"])({position:"absolute",top:n,left:i,fontFamily:"Segoe UI",fontSize:"12px",fontWeight:"normal",background:"white",height:h},c);return s.a.createElement("div",{className:"wrap-node",style:l},s.a.createElement(t,e))}}var W=U;Date.now();function b(t,e){var n=100,i=50,a=Array(Math.ceil(t.length/i)).fill().map(((t,e)=>e*i)).map((e=>t.slice(e,e+i))),o=0;function r(t){var i=performance.now();while(o<a.length&&performance.now()-i<16)e(a[o],o===a.length-1),o++;o<a.length&&setTimeout((()=>{requestAnimationFrame(r)}),n)}setTimeout((()=>{requestAnimationFrame(r)}),0)}class V extends r["Component"]{constructor(t){super(t),this.handleChunk=(t,e)=>{var n=t;this.elements=this.elements.concat(n),l.a.render(this.elements,this.container),e&&this.props.onFinish&&this.props.onFinish()},this.container=null,this.elements=[]}componentDidMount(){var t=this.props.doms;b(t,this.handleChunk)}componentDidUpdate(t){if(t.linesAndDomsNums.length!==this.props.doms.length){var e=this.props.doms;this.elements=[],b(e,this.handleChunk)}}render(){return s.a.createElement("div",{ref:t=>this.container=t})}}var j=V;class G extends F{constructor(){super(),this.dom=null,this.nodeDom=null,this.onChange=null,this.customPosition=null,this.fixed=!0,this.lineType=2,this.linkType="dashed",this.domHeight=0,this.domWidth=0,this.Nodes={},this.interaction=!0,this.constant={},this.constant.COMPONENT_WIDTH=C,this.constant.COMPONENT_HEIGHT=g,this.constant.COMPONENT_SPACE_VERTICAL=A,this.constant.COMPONENT_SPACE_HORIZONTAL=_,this.constant.ROOT_WIDTH=I,this.isFirst=!0,this.linesAndDoms=[],this.linesAndDomsNums=0}init(t){var e=t.data,n=t.options,i=t.styleOptions,a=t.container,o=n||{},r=o.initType,s=o.onChange,h=o.customPosition,c=o.fixed,l=o.nodeDom,d=o.lineType,E=o.onFinish,m=i||{},u=m.nodeWidth,O=m.nodeHeight,T=m.spaceVertical,N=m.spaceHorizontal,D=m.rootWidth;this.initType=r||!1,this.nodeDom=l||w||null,this.onChange=s||(()=>{}),this.customPosition=h,this.fixed=c,this.lineType=d||2,this.linkType="dashed",this.dom=a,this.domHeight=0,this.domWidth=0,this.constant={},this.constant.COMPONENT_WIDTH=u||C,this.constant.COMPONENT_HEIGHT=O||g,this.constant.COMPONENT_SPACE_VERTICAL=T||A,this.constant.COMPONENT_SPACE_HORIZONTAL=N||_,this.constant.ROOT_WIDTH=D||I,this.onFinish=E||(()=>{}),this.setData(e||null),this.data&&(this.isFirst=!1,this.render())}setData(t){this.data=t}drawNode(){var t,e,n=[];return this.flattenNodes=(null===(t=this.Nodes)||void 0===t?void 0:t.descendants())||[],null===(e=this.flattenNodes)||void 0===e||e.forEach((t=>{var e=t.data,i=t.x,a=t.y,o=e.key,r=e.nodeName,h=u(r)>this.constant.COMPONENT_WIDTH,c=()=>{var e=this.nodeDom&&this.nodeDom({node:t,nodeToggle:t=>this.foldingClick(t),id:this.getHierarchyId(o,"root")+i+a,constants:L,fixed:this.fixed})||null;return e},l=W(c);n.push(s.a.createElement(l,{key:this.getHierarchyId(o,"root")+i+a,id:this.getHierarchyId(o,"root"),width:!h&&this.constant.COMPONENT_WIDTH,minWidth:this.constant.COMPONENT_WIDTH,minHeight:this.constant.COMPONENT_HEIGHT,x:i,y:a,fixed:this.fixed}))})),n}drawLine(){var t;this.flattenLinks=(null===(t=this.Nodes)||void 0===t?void 0:t.links())||[];var e=[];return e=(null===this||void 0===this?void 0:this.flattenLinks.map((t=>{var e,n,i,a=t.source,o=t.target,r=a.data.key,h=o.data.key,c=a.y,l=u(a.data.nodeName||"");c=a.parent?this.fixed?a.y+this.constant.COMPONENT_WIDTH:a.y+(l>this.constant.COMPONENT_WIDTH?l:this.constant.COMPONENT_WIDTH):a.y+this.constant.COMPONENT_WIDTH;var d=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.children.length)||(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n._children.length)||0;return s.a.createElement("div",{key:this.getHierarchyId(r,h)+a.x+a.y,"data-key":this.getHierarchyId(r,h)+a.x+a.y},s.a.createElement(k,{root:!a.parent,color:null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.color,length:d,source:{x:c,y:a.x},target:{x:o.y,y:o.x},type:this.lineType,linkType:this.linkType}))})))||[],e}buildPosition(t){var e=0,n=0,i=0,a=null===t||void 0===t?void 0:t.eachAfter((t=>{var a=this.calcWidth(t)||0,r=t.children,s=t.data,h=t.parent;if(this.fixed?t.y=t.depth*(this.constant.COMPONENT_WIDTH+this.constant.COMPONENT_SPACE_HORIZONTAL):t.y=t.depth*(this.constant.COMPONENT_WIDTH+this.constant.COMPONENT_SPACE_HORIZONTAL)+a,this.customPosition){var c=this.customPosition(t),l=Object(o["default"])(c,2);t.x=l[0],t.y=l[1]}null===h?(t.y=0,t.x=r&&r.length?(r[0].x+r[r.length-1].x)/2:0):"relation"===s.type?t.x=r&&r.length?(r[0].x+r[r.length-1].x)/2:0:(t.x=e*(this.constant.COMPONENT_HEIGHT+this.constant.COMPONENT_SPACE_VERTICAL),e+=1),n=Math.max(t.y+u(t.data.nodeName||""),n),i=Math.max(t.x+g,i)}));this.domWidth=n,this.domHeight=i,this.Nodes=a}getHierarchyId(){var t=[],e=0,n=0;for(e=arguments.length,t=new Array(e);n<e;n++)t[n]=n<0||arguments.length<=n?void 0:arguments[n];return t.join(".")}calcWidth(t){var e=0;if(!t)return 0;var n=t=>{if(t){var i=u(t.data.nodeName||"");i>this.constant.COMPONENT_WIDTH&&(e+=i-this.constant.COMPONENT_WIDTH),t.parent&&n(t.parent)}};return n(t.parent,0),e}nodeChange(t){this.data.nodeName=t.nodeName,this.data.children=t.children,this.onChange(this.data),this.initData(this.data),this.render()}foldingClick(t){var e,n,i={nodeName:this.data.nodeName,children:this.data.children};t.children?(e=t.path.slice(0,t.path.length-1),n=Object(h["get"])(i,e),n._children=n.children,n.children=null):(e=t.path,n=Object(h["get"])(i,e),n.children=n._children||t._children,n._children=null),this.nodeChange&&this.nodeChange(i)}expand(){var t=this;return Object(a["default"])(Object(i["default"])().mark((function e(){return Object(i["default"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.onChange(t.data),e.next=3,t.data.children.forEach(T);case 3:return e.next=5,t.initData();case 5:return e.next=7,t.render();case 7:case"end":return e.stop()}}),e)})))()}packUp(){var t=this;return Object(a["default"])(Object(i["default"])().mark((function e(){return Object(i["default"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.onChange(t.data),e.next=3,t.data.children.forEach(O);case 3:return e.next=5,t.initData();case 5:return e.next=7,t.render();case 7:case"end":return e.stop()}}),e)})))()}render(){this.buildPosition(this.hierarchyData);var t=this.drawNode(),e=this.drawLine();this.linesAndDomsNums!==t.length+e.length&&(this.linesAndDomsNums=t.length+e.length,l.a.render(s.a.createElement("div",{style:{position:"relative",zIndex:9,width:this.domWidth+100,height:this.domHeight,margin:"80px 0 0 20px"}},s.a.createElement(j,{doms:t.concat(e),linesAndDomsNums:this.linesAndDomsNums,onFinish:this.onFinish})),this.dom))}}var X=()=>new Proxy(new G,{set(t,e,n){if("data"===e){if(!n)return!0;var i,a;if(!0!==t.initType&&t.interaction)null===n||void 0===n||null===(i=n.children)||void 0===i||i.forEach(O);else null===n||void 0===n||null===(a=n.children)||void 0===a||a.forEach(T);return Reflect.set(t,e,n),t.initData(),t.render(),!0}return Reflect.set(t,e,n),!0},get(t,e){return Reflect.has(t,e)?Reflect.get(t,e):-1}}),Y=X},"Vu+n":function(t,e,n){}}]);